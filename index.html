<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Catcher Game</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Comic Sans MS', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            overflow: hidden;
        }

        html {
            height: 100%;
        }

        .game-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        .game-title {
            font-size: 24px;
            font-weight: bold;
            color: #4a5568;
            margin: 0;
        }

        .game-stats {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .stat {
            background: #4299e1;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 16px;
        }

        .play-area {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: linear-gradient(45deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
        }

        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            /* --- Modified Background Properties --- */
            background: url('./image.jpg') no-repeat center center/cover;
            z-index: 50;
        }

        .screen.hidden {
            display: none;
        }

        .screen h1 {
            font-size: 48px;
            color: #4a5568;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .screen p {
            font-size: 18px;
            color: #718096;
            margin-bottom: 30px;
            text-align: center;
            max-width: 400px;
        }

        .btn {
            background: linear-gradient(45deg, #4299e1, #3182ce);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 20px;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(66, 153, 225, 0.4);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(66, 153, 225, 0.6);
        }

        .btn:active {
            transform: translateY(0);
        }


        .ai-icon {
            position: absolute;
            width: 60px;
            height: 60px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            touch-action: manipulation;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px; /* emoji size */
            line-height: 1;
            text-align: center;
            filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.15));
            user-select: none;
        }

        /* If an SVG remains elsewhere, keep its sizing rule harmlessly */
        .ai-icon svg {
            width: 100%;
            height: 100%;
        }

        .ai-icon:hover {
            transform: scale(1.1);
        }

        .ai-icon.clicked {
            animation: pop 0.3s ease-out;
        }

        .ai-icon.appearing {
            animation: appear 0.5s ease-out;
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(0); opacity: 0; }
        }

        @keyframes appear {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .score-popup {
            position: absolute;
            color: #38a169;
            font-weight: bold;
            font-size: 24px;
            pointer-events: none;
            animation: scoreFloat 1s ease-out forwards;
            z-index: 20;
        }

        @keyframes scoreFloat {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }

        .final-score {
            font-size: 36px;
            color: #4299e1;
            font-weight: bold;
            margin: 20px 0;
        }

        .intensity-indicator {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 69, 0, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 12px;
            animation: pulse 1s infinite;
            z-index: 30;
            display: none;
        }

        .intensity-indicator.show {
            display: block;
        }

        @keyframes pulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .game-title {
                font-size: 20px;
            }

            .stat {
                padding: 6px 12px;
                font-size: 14px;
            }

            .screen h1 {
                font-size: 36px;
            }

            .screen p {
                font-size: 16px;
                padding: 0 20px;
            }

            .ai-icon {
                width: 70px;
                height: 70px;
                font-size: 44px;
            }

            .header {
                padding: 10px 15px;
            }

            .game-stats {
                gap: 15px;
            }
        }

        @media (max-width: 480px) {
            .ai-icon {
                width: 80px;
                height: 80px;
                font-size: 52px;
            }

            .game-title {
                font-size: 18px;
            }

            .stat {
                padding: 5px 10px;
                font-size: 12px;
            }
        }

        .footer {
            background-color: #ffffff;
            color: rgb(0, 0, 0);
            text-align: center;
            padding: 13px;
            position: fixed;
            bottom: 0;
            width: 100%;
            z-index: 1000;
        }

        .footer.hidden {
            display: none;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="game-container">
   <div class="header">
    <h1 class="game-title" id="gameTitle">AI Catcher</h1>
    <div class="game-stats">
     <div class="stat">
      Score: <span id="score">0</span>
     </div>
     <div class="stat">
      Time: <span id="timer">30</span>s
     </div>
    </div>
   </div>
   <div class="play-area" id="playArea">
    <div class="intensity-indicator" id="intensityIndicator">
     ðŸ”¥FINAL RUSH!ðŸ”¥
    </div>
   </div>
   <div class="screen" id="startScreen">
    <h1>ðŸ¤– AI Catcher</h1>
    <p>Catch the AI icons as they appear! Each catch gives you +10 points. You have 30 seconds - can you beat your high score?</p><button class="btn" id="startBtn">Start Game</button>
   </div>
   <div class="screen hidden" id="endScreen">
    <h1>ðŸŽ‰ Game Over!</h1>
    <div class="final-score" id="finalScore">
     Score: 0
    </div>
    <p id="scoreMessage">Great job catching those AIs!</p><button class="btn" id="restartBtn">Play Again</button>
   </div>
  </div>
  <div class="footer">
ðŸŽ‰ Developed from Canva AI assets, refined and 
modified by Anisa Safira Putri.  </div>
<audio id="clickEffect" src="./effect.mp3" preload="auto"></audio>
<audio id="bgMusic" src="./music.mp3" preload="auto"></audio>  
  <script>
        // Default configuration
        const defaultConfig = {
            game_title: "AI Catcher",
            start_button_text: "Start Game",
            restart_button_text: "Play Again"
        };

        const EFFECT_POOL_SIZE = 8; 
        const effectPool = [];
        
        for (let i = 0; i < EFFECT_POOL_SIZE; i++) {
            const sfx = new Audio('./effect.mp3');
            sfx.volume = 1.0;
            effectPool.push(sfx);
        }
        
        function playEffect() {
            for (const sfx of effectPool) {
                if (sfx.paused) {
                    sfx.currentTime = 0;
                    sfx.play();
                    return;
                }
            }
        }
   
        const bgMusic = document.getElementById('bgMusic');
        bgMusic.volume = 0.6;
        // Game state


   
        let gameState = {
            isPlaying: false,
            score: 0,
            timeLeft: 30,
            spawnInterval: null,
            gameTimer: null,
            activeIcons: new Set(),
            isIntensityMode: false
        };

        // Icon set now uses emoji characters (spawnAI still uses this helper)
        const multimediaSVGs = [
            'ðŸŽ§', // Headphones
            'ðŸŽµ', // Music note
            'ðŸŽ¬', // Clapperboard / film
            'ðŸ“¸', // Camera
            'ðŸŽ¤', // Microphone
            'ðŸ“º', // TV
            'ðŸ“€', // CD / DVD
            'ðŸŽ®',  // Game controller
            'ðŸŽ¨', // Paint
            'ðŸŽ¥', // Video recorder
            'ðŸ–¼ï¸' // Picture
        ];

        function getRandomIconSVG() {
            return multimediaSVGs[Math.floor(Math.random() * multimediaSVGs.length)];
        }

        // Initialize Element SDK
        async function initializeElementSDK() {
            if (window.elementSdk) {
                await window.elementSdk.init({
                    defaultConfig,
                    onConfigChange: async (config) => {
                        document.getElementById('gameTitle').textContent = config.game_title || defaultConfig.game_title;
                        document.getElementById('startBtn').textContent = config.start_button_text || defaultConfig.start_button_text;
                        document.getElementById('restartBtn').textContent = config.restart_button_text || defaultConfig.restart_button_text;
                    },
                    mapToCapabilities: (config) => ({
                        recolorables: [
                            {
                                get: () => config.primary_color || "#4299e1",
                                set: (value) => {
                                    config.primary_color = value;
                                    window.elementSdk.setConfig({ primary_color: value });
                                }
                            }
                        ],
                        borderables: [],
                        fontEditable: undefined,
                        fontSizeable: undefined
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ["game_title", config.game_title || defaultConfig.game_title],
                        ["start_button_text", config.start_button_text || defaultConfig.start_button_text],
                        ["restart_button_text", config.restart_button_text || defaultConfig.restart_button_text]
                    ])
                });
            }
        }

        // Game functions
        function startGame() {
            gameState.isPlaying = true;
            gameState.score = 0;
            gameState.timeLeft = 30;
            gameState.isIntensityMode = false;
            bgMusic.currentTime = 0;
            bgMusic.play().catch(e => console.log(e));
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('endScreen').classList.add('hidden');
            document.getElementById('intensityIndicator').classList.remove('show');
            document.querySelector('.footer').classList.add('hidden');

            updateDisplay();
            startSpawning();
            startTimer();
        }

        function endGame() {
            gameState.isPlaying = false;
            clearInterval(gameState.spawnInterval);
            clearInterval(gameState.gameTimer);

            bgMusic.pause();
            bgMusic.currentTime = 0;
         
            // Clear all active icons
            gameState.activeIcons.forEach(icon => {
                if (icon.parentNode) {
                    icon.parentNode.removeChild(icon);
                }
            });
            gameState.activeIcons.clear();

            // Show end screen
            document.getElementById('finalScore').textContent = `Score: ${gameState.score}`;
            document.getElementById('scoreMessage').textContent = getScoreMessage(gameState.score);
            document.getElementById('endScreen').classList.remove('hidden');
            document.getElementById('intensityIndicator').classList.remove('show');
            document.querySelector('.footer').classList.remove('hidden');
        }

        function getScoreMessage(score) {
            if (score >= 300) return "ðŸ† AI Master! Incredible reflexes!";
            if (score >= 200) return "ðŸŒŸ Excellent! You're an AI catching pro!";
            if (score >= 100) return "ðŸ‘ Great job! Keep practicing!";
            if (score >= 50) return "ðŸ˜Š Not bad! Try again for a higher score!";
            return "ðŸŽ¯ Good start! You'll get better with practice!";
        }

        function startTimer() {
            gameState.gameTimer = setInterval(() => {
                gameState.timeLeft--;
                updateDisplay();
                
                // Activate intensity mode at 10 seconds
                if (gameState.timeLeft === 10 && !gameState.isIntensityMode) {
                    activateIntensityMode();
                }
                
                if (gameState.timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function activateIntensityMode() {
            gameState.isIntensityMode = true;
            document.getElementById('intensityIndicator').classList.add('show');
            
            // Clear current spawn interval and start more intense spawning
            clearInterval(gameState.spawnInterval);
            startSpawning();
        }

        function startSpawning() {
            const spawnDelay = gameState.isIntensityMode ? 400 : 800; // 0.4s vs 0.8s
            
            gameState.spawnInterval = setInterval(() => {
                if (gameState.isPlaying) {
                    // In intensity mode, sometimes spawn multiple icons
                    const spawnCount = gameState.isIntensityMode && Math.random() < 0.4 ? 2 : 1;
                    for (let i = 0; i < spawnCount; i++) {
                        spawnAI();
                    }
                }
            }, spawnDelay);
        }

        function spawnAI() {
            const playArea = document.getElementById('playArea');
            const icon = document.createElement('div');
            icon.className = 'ai-icon appearing';
            // choose a random multimedia SVG for more variety
            icon.innerHTML = getRandomIconSVG();

            // Random position (accounting for icon size)
            const maxX = playArea.clientWidth - 80;
            const maxY = playArea.clientHeight - 80;
            const x = Math.random() * Math.max(maxX, 0) + 40;
            const y = Math.random() * Math.max(maxY, 0) + 40;

            icon.style.left = x + 'px';
            icon.style.top = y + 'px';

            // Add click/touch handlers
            const handleCatch = (e) => {
                e.preventDefault();
                e.stopPropagation();
                catchAI(icon, e.clientX || e.touches[0].clientX, e.clientY || e.touches[0].clientY);
            };

            icon.addEventListener('click', handleCatch);
            icon.addEventListener('touchstart', handleCatch, { passive: false });

            playArea.appendChild(icon);
            gameState.activeIcons.add(icon);

            // Remove the appearing class after animation completes
            setTimeout(() => {
                icon.classList.remove('appearing');
            }, 500);

            // Remove after 1.6 seconds if not clicked
            setTimeout(() => {
                if (icon.parentNode && gameState.activeIcons.has(icon)) {
                    icon.parentNode.removeChild(icon);
                    gameState.activeIcons.delete(icon);
                }
            }, 1600);
        }

        function catchAI(icon, clientX, clientY) {
            if (!gameState.activeIcons.has(icon)) return;
            
            gameState.score += 10;
            gameState.activeIcons.delete(icon);
         
            playEffect();

         
            // Add clicked animation
            icon.classList.add('clicked');
            
            // Show score popup
            showScorePopup(clientX, clientY);
            
            // Remove icon after animation
            setTimeout(() => {
                if (icon.parentNode) {
                    icon.parentNode.removeChild(icon);
                }
            }, 300);
            
            updateDisplay();
        }

        function showScorePopup(x, y) {
            const popup = document.createElement('div');
            popup.className = 'score-popup';
            popup.textContent = '+10';
            popup.style.left = x + 'px';
            popup.style.top = y + 'px';
            
            document.body.appendChild(popup);
            
            setTimeout(() => {
                if (popup.parentNode) {
                    popup.parentNode.removeChild(popup);
                }
            }, 1000);
        }

        function updateDisplay() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('timer').textContent = gameState.timeLeft;
        }

        // Event listeners
        document.getElementById('startBtn').addEventListener('click', startGame);
        document.getElementById('restartBtn').addEventListener('click', startGame);

        // Allow context menu for debugging

        // Initialize the game
        initializeElementSDK();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99f06986f64b7b39',t:'MTc2MzIyNzE1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>






